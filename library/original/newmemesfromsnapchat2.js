h=t/1.125,m=min((h%16384)/4080,1)**3,
limiter=t=>max(min(t,1),-1),

//drums
t||(a=b=c=d=e=0),e+=(sin(t**PI*819)-e)/1.5,fil=e-sin(t**PI*819),a+=b+=(sin(random()*0.51+t/3)/2-a)/(1/3)||0,c+=d+=(sin(random()*10)/2-c-d)/6,hihat=t=>a%max(-(t/5000)+1,0)||0,kick=t=>sin(0.999**(t)*12-t/93+sin(0.999**(t)*12-t/92)*t/5200+sin(t/9)*0.93**((t/52)**3)*2)/((t/2222)**7.5+1)*min(t/12, 1)*(1-(t>8192)),snare=(t)=>sin(t/38-0.995**(t)*18+sin(t/35)*t/4102+(c*t/491)/(t/428))*max(-(t/6040)+1, 0)*min(sqrt(t/481),1)||0,ride=t=>sin(((sin(t-fil)-sin(t/1.01-fil)-cos(t/1.015-fil)+sin(t*4-fil))/13+sin(t/24-fil/(((t/8608)**2)/819+1/6)+cos(t/13)/5*(t/33092)))*2)*((max(-t/16999+1, 0))), 

//output

v=(g)=>kick((h*2)%16384/2)*3*(((~h*2&65535)>32768)+((h*2&65535)>(32768+16384)))+snare(((h*2+16384*4.5)%65536/2))*3+snare(((h*2+8192)%16384/2))*3*(~h&32768?0:h*2&16384?0:h*2&32768?0:1)+hihat(((h)+16384)%32768)+snare(((h*2)+16384*2)%65536/2)*2+ride(h%8192)/2+tan(cbrt(sin(t*g*[1,0,2,4,0,2,3,2,1.5,2,1,0,2,3,2,1.5][h>>13&15]/41)))/[2,3,4,6,8,12,16,24][h/[1,1.5][h>>12&1]>>10&7]*2+cbrt(asin(sin(t*g/[2,3,2.5,4][h>>16&3]/41))),

X=(h) =>limiter(v(h)/2)*PI,

[X(1+1/256)/4, X(1-1/256)/4];