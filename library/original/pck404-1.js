SR=22050,
t/=SR,
TAU=2*PI,
mtof=(n)=>440*2**((n-69)/12),
r=floor(t/16)%4,
dli=0.1+atan(2*sin(t/17))*0.6,
dl=(t,fn)=>(fn(t)+(fn(t-0.2502)/3+fn(t-0.505)/5+fn(t-0.758)/7)*dli),
arp=(t,d)=>dl(t,t=>(env=(t*5)%1<0.1?(t*40)%1:(1-((t*5)%1)),env*sin(t*PI*mtof(56+d+[0,2,7,11,16][floor(t*5)%5]+(12*((t*5)%10>5))-r*2)))),
n=(t,s)=>sin((mtof([80,87,87,92][(t>>s)%4])+sin(t*5000)*0.00005)*t*PI),
cy=(t/16)%1,
+0.5*atan(1.5*arp(t,0))
+0.18*arp(t+0.5,0)*sin(t/12)
+0.15*arp(t+sin(t/100)*0.75,0)*sin(t/11)
+0.1*arp(t+sin(t/20)*0.25,12)*sin(t/11)
+0.05*arp(t+sin(t/500)*0.55,19)*sin(t/20)
+0.3*dl(t,(t)=>random()*sin((t-0.1)*8)*max(0,(1-((t*8)%1)))*(0b1010011010>>((t*8)&15)&1)*(0.1+sin(t/5)*0.1))*min(1,t/96)
+0.05*dl(t,t=>n(t,3)*(1-((t/2)%1)/1)*(0b001001010>>(floor(t/5)%7)&1))
+0.08*dl(t,t=>n(t,4)*((t%3)<1?(t%1)/2:0)*(0b001010101>>(floor(t/7)%8)&1))
+0.006*random()
+0.6*atan(2*sin(t*TAU*mtof(32-r*2)))*(0.1+(cy<0.5?cy:1-cy))*((t/128)%1>.5)
